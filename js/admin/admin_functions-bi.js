// JavaScript Document
/* ===========================================
	Redirection  Methods
   =========================================*///Redirect Main Content
function redirectTo(e){findTab(e);$.ajax({url:e,onSubmit:$("#content").html('<p><img src="/images/admin/ajax-loader.gif" alt="loading cursor"/>loading....</p>'),success:function(e){getErrors();$("#content").html(e)},error:function(t,n,r){alert("The Page"+e+"was not Found")}})}function changeActiveTab(e){e.parent("li").siblings().removeClass("active");e.parent("li").addClass("active")}function findTab(e){_b=new Array;_b=e.split("/");var t=_b[2].slice(0,4);_a=new Array;_a=e.split("?");t=="info"?$url=_a[0].replace("info","form"):$url=_a[0];$("#tabs ul li").each(function(){$(this).children().attr("href")==$url&&changeActiveTab($(this).children())})}function getErrors(){$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{errorPlacement:1},dataType:"json",success:function(e){$("#dialog").modal({style:e.style,text:e.text,reportError:e.reportError})}})}function postError(e,t){$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{addError:t,type:e},success:function(e){getErrors()}})}function ajaxFormSubmit(e){var t=e.serialize();$.ajax({type:"POST",url:"/ajax/admin/admin_form_submit.php",data:t,beforeSubmit:$(".data").html("loading...."),success:function(e){$(".data").html(e);redirectTo(e)},error:function(e,t,n){$(".data").html('<ul class="errors"><li>Something went wrong with out System, please alert our admin with this id: AJ198473</li></ul>')}})}$("#navigation ul li a").click(function(e){e.preventDefault();var t=$(this),n=t.attr("sel"),r=t.attr("href");changeActiveTab(t);$.ajax({url:"handlers/navigation.php",type:"POST",data:{sel:n,href:r},dataType:"json",onSubmit:$("#content").html('<p><img src="/images/admin/ajax-loader.gif" alt="loading cursor"/>loading....</p>'),success:function(e){$("#tabs").html(e.tabs);$.ajax({url:r,success:function(e){if(e!=null){$("#content").html(e);getErrors()}else $("#content").html("I looked for your file but it is not there.")},error:function(e,t,n){$("#content").html("Hmm an Error..Something is missing.")}})},error:function(e,t,n){postError("Error","This page does not exisit")}})});$("#tabs ul li a").live("click",function(e){e.preventDefault();$this=$(this);$href=$this.attr("href");changeActiveTab($this);$.ajax({url:$href,type:"POST",onSubmit:$("#content").html('<p><img src="/images/admin/ajax-loader.gif" alt="loading cursor"/>loading....</p>'),success:function(e){getErrors();$("#content").html(e)},error:function(e,t,n){postError("error","This page does not exisit")}})});$(".redirect").live("click",function(e){e.preventDefault();var t=$(this).attr("href");redirectTo(t)});$(".move").live("click",function(e){e.preventDefault();$title=$(this).attr("title");$id=$(this).attr("sel");$class=$(this).parent("li").attr("class");$position=$(this).parent("li").attr("sel");$href=$(this).attr("href");$parent=$(this).attr("parent");$menu_id=$(this).attr("menu");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{id:$id,move:$title,"class":$class,position:$position,href:$href,parent:$parent,menu_id:$menu_id},success:function(e){redirectTo(e)}})});$(".published").live("click",function(){var e=$(this).attr("id"),t=$(this).attr("sel"),n=$(this).attr("published"),r=$(this);n=="yes"&&(n=!0);$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{publishedId:e,"class":t,published:n},success:function(e){r.parent().html(e)}})});$(".setDefault").live("click",function(e){e.preventDefault();$this=$(this);$id=$(this).attr("id");$href=$(this).attr("href");if($this.hasClass("active"))return!1;$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{defaultId:$id,href:$href},success:function(e){redirectTo(e)}})});$("#access").live("change",function(){if($(this).parent().attr("class")=="new")return!1;var e=$(this).attr("sel"),t=$(this).attr("class"),n=$(this).val(),r=$(this);$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{access:n,"class":t,id:e},success:function(e){r.parent().html(e)}})});$(".menuSelect ul li").live("click",function(){$this=$(this);$id=$(this).attr("sel");$url="forms/navigation/navigation.php";$url+="?sel="+$id;$.ajax({url:$url,success:function(e){$("#content").html(e)}})});$(".edit").live("click",function(e){e.preventDefault();redirectTo($(this).attr("href"))});$(".quickEdit").live("click",function(e){e.preventDefault()});$(".quickEdit").live("dblclick",function(e){$this=$(this);$value=$this.html();$id=$this.attr("id");$column=$this.attr("title");$href=$this.attr("href");$this.replaceWith('<input type="text" name="'+$column+'"  value="'+$value+'"  link="'+$href+'" /><button class="editSubmit" name="editSubmit" id="'+$id+'">Edit</button>')});$(".editSubmit").live("click",function(e){$this=$(this);$className=$(this).parent().attr("class");$id=$this.attr("id");$value=$this.prev("input").val();$href=$this.prev("input").attr("link");$name=$this.prev("input").attr("name");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{id:$id,"class":$className,name:$name,value:$value,quickEdit:1,href:$href},success:function(e){redirectTo(e)}})});$(".delete").live("click",function(e){e.preventDefault();if(!confirm("You are about to delete this item. Is this what you want to do?"))return!1;$class=$(this).attr("id");$id=$(this).attr("sel");$href=$(this).attr("href");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{id:$id,"class":$class,href:$href,deleter:1},success:function(e){redirectTo(e)}})});$(".addPhone").live("click",function(e){e.preventDefault();$span=$(this).parent("span");$paragraph=$(this).parent("span").parent("p");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{addPhone:1},success:function(e){$span.hide();$paragraph.after(e)}})});$(".deletePhones").live("click",function(e){e.preventDefault();$(".phonesForUsers").each(function(){$(this).val()!=null&&$(this).append('<span class="ninjaSymbol ninjaSymbolClear" id="deletePhone"></span>');$(this).find(".phoneButtons").hide()})});$("#deletePhone").live("click",function(e){$parent=$(this).parent("p");$id=$parent.find("#phone_id").val();var t=$(".phoneButtons").html();$(".phoneButtons").remove();$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{deletePhone:$id},success:function(e){if(e){$parent.remove();$(".phonesForUsers").children("span.ninjaSymbol").remove();$(".phonesForUsers:last").append('<span class="phoneButtons">'+t+"</span>");$(".phoneButtons").show()}}})});$("#siteOnOff").live("change",function(e){_val=$(this).val();_key=$(this).attr("data-name");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{siteConfigOnOff:_val,siteConfigName:_key},success:function(e){$(".data").html(e)}})});$(".reportError").live("click",function(e){e.preventDefault();$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{reportError:1},onSubmit:$(this).html("Sending Email"),success:function(e){getErrors()}})});$("form#formUpdate").live("submit",function(e){e.preventDefault();$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.val("")});var t=$(this);validate(t);var n=1,r=t.children("fieldset").find(":input:not(button)").hasClass("hasError");r&&(n=-1);n==1&&ajaxFormSubmit(t)});$("select#menu_id").live("change",function(){var e=$(this).val();$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{menu_id:e,menuChange:1},dataType:"json",beforeSubmit:$(".listParents").html("loading..."),success:function(e){$(".listParents").html(e.parent);$(".listPosition").html(e.position)}})});$("select#parent_id").live("change",function(){var e=$("select#menu_id").val(),t=$(this).val();$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{menu_id:e,parent_id:t,parentChange:1},beforeSubmit:$(".listPosition").html("loading..."),success:function(e){$(".listPosition").html(e)}})});$("input#content_title").live("focus",function(){$("#dialog").modal({style:"html",url:"forms/content/pop_up_content.php",height:400,width:800})});$(".drugList a").live("click",function(){$("#dialog").modal({style:"html",url:"forms/compass/pop_up_drugs.php",height:400,width:800})});$(".supplementStar").live("click",function(e){e.preventDefault();_parent=$(this).parent("td");_title=$(this).attr("title");_id=$(this).attr("id");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{supplementTitle:_title,id:_id},success:function(e){_title=="featured"?_parent.html(e):redirectTo("forms/supplements/list_supplements.php")}})});$(".reloadSupplements").live("click",function(e){e.preventDefault();_this=$(this);$.ajax({url:"/ajax/admin/admin_form_submit.php",type:"POST",data:{supplementReload:1},onSubmit:_this.html('<p><img src="/images/admin/ajax-loader.gif" alt="loading cursor"/>Processing...</p>'),success:function(e){redirectTo(e)}})});$('#dialog .popup tr td[col="title"]').live("click",function(){var e=$(this).parent().attr("primary_key");$("input#content_id").val(e);$("input#content_title").val($(this).html());$("#mask").click()});$('#dialog .popup tr td[col="drugName"]').live("click",function(){var e=$(this).parent().attr("primary_key");$("#drugName").val($(this).html());$(".drugs").prepend('<li><span class="ninjaSymbol ninjaSymbolClear" id="deleteCompass"></span>'+$(this).html()+'<input type="hidden" name="drug_id[]" value="'+e+'" /></li>');$("#mask").click()});$("#deleteCompass").live("click",function(e){e.preventDefault();$(this).parent("li").remove()});$(".grid tr td a").live("click",function(e){e.preventDefault();if($(this).hasClass("published"))return;$(this).attr("target","_self");var t=$(this).attr("href"),n=$(this).parent("td").parent("tr").attr("primary_key"),r=t+"?sel="+n;redirectTo(r)});$(".stuckRow td a").live("click",function(e){e.preventDefault();if($(this).hasClass("published"))return;$(this).attr("target","_self");var t=$(this).attr("href"),n=$(this).parent("td").parent("tr").attr("primary_key"),r=t+"?sel="+n;redirectTo(r)});$("#type").live("change",function(){_id=$(".activeInput").attr("sel");if($(this).val()==2){$(this).attr("sel",$("#content_id").val());$(".contentInput").hide();$(".drugList").hide();$(".drugs").html("");$(".contentInput").children("input").val("");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{content_link:_id},success:function(e){$(".externalInput input").val($.trim(e))}});$(".externalInput").show()}else if($(this).val()==3){$(".contentInput").hide();$(".externalInput").hide();$(".externalInput").children("input").val("");$(".contentInput").children("input").val("");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{content_drugList:_id},success:function(e){$(".drugs").html($.trim(e))}});$(".drugList").show()}else{$(".externalInput").hide();$(".externalInput").children("input").val("");$(".drugList").hide();$(".drugs").html("");$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{content_title:_id},success:function(e){$("#content_title").val($.trim(e));$("#content_id").val(_id)}});$(".contentInput").show()}});$("[placeholder]").focus(function(){var e=$(this);if(e.val()==e.attr("placeholder")){e.val("");e.removeClass("placeholder")}}).blur(function(){var e=$(this);if(e.val()==""||e.val()==e.attr("placeholder")){e.addClass("placeholder");e.val(e.attr("placeholder"))}}).blur();$(".preview").live("click",function(e){e.preventDefault();_title=$("#title").val();_content=$(".editorContent").val();if(_content==0){_id=$(".editorContent").attr("id");_tiny=tinyMCE.get(_id);_content=_tiny.getContent()}$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{preview:1,title:_title,content:_content},success:function(){window.open("/preview.html")}})});