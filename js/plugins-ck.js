// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
function cssPaint(a){a.addClass("hasError");a.after('<span class="validationError">'+$message+"</span>");$("form button").addClass("disabled")}function clearPaint(a){a.removeClass("hasError");a.next("span.validationError").remove();$("form button").removeClass("disabled")}function required(a){return 0==a.length?($message="This field is required",!0):!1}function email(a){a=a.replace(" ","").replace("	","");return 0==a.length?($message="Your email is required",!0):/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a)?!1:($message="Please provide a valid email",!0)}function equalTo(a,b){var c=b.parent("p").prev("p").children("input").val();return a!=c?($message="The passwords do not match",!0):!1}function checkPassword(a,b,c){$.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{id:b,checkPassword:a},success:function(a){0!=a&&($message=a,cssPaint(c))}})}function numeric(a){return 0==a.length?($message="this field is required",!0):/^[-]?\d*\.?\d*$/.test(a)?!1:($message="All values must be numeric",!0)}function zip(a){return 0==a.length?!0:/^\d{5}(-\d{4})?$/.test(a)?!1:($message="Please enter a valid zip",!0)}function usPhone(a){return 0==a.length?($message="This field is required",!0):/^\(?[2-9]\d{2}[\)\.-]?\s?\d{3}[\s\.-]?\d{4}$/.test(a)?!1:($message="Please enter a valid US phone (xxx)xxx-xxxx",!0)}function nospecial(a){return 0==a.length?!0:/^[a-zA-Z0-9 \?]*$/.test(a)?!1:($message="Please do not enter any special characters",!0)}function date(a){if(0==a.length)return!0;var b=/^(\d{2})[\/](\d{2})[\/](\d{4})$/;if(!b.test(a))return $message="Please enter a valid date. mm/dd/yyyyy",!0;var c=a.match(b),a=c[1],b=parseInt(c[2]),c=parseInt(c[3]),d=(new Date).getFullYear();(new Date).getDate();(new Date).getMonth();return 1>a||12<a||1900>c||c>d?($message="Please enter a valid date. mm/dd/yyyyy",!0):1>b&&b>(2==a?0==c%4?29:28:4==a||6==a||9==a||11==a?30:31)?($message="Please enter a valid date. mm/dd/yyyyy",!0):!1}function futureDate(a){if(0==a.length)return!0;var b=/^(\d{2})[\/](\d{2})[\/](\d{4})$/;if(!b.test(a))return $message="Please Enter Valid Date mm/dd/yyyy",!0;var c=a.match(b),a=parseInt(c[1]),b=parseInt(c[2]),c=parseInt(c[3]),d=(new Date).getFullYear(),e=(new Date).getDate(),f=(new Date).getMonth();if(1>a||12<a||1900>c)return $message="Please Enter Valid Date mm/dd/yyyy",!0;if(1>b&&b>(2==a?0==c%4?29:28:4==a||6==a||9==a||11==a?30:31))return $message="Please enter a valid date. mm/dd/yyyyy",!0;if(c<d)return $message="Must be a future Date",!0;if(c==d&&a<f+1)return $message="Must be a future Date",!0;if(c==d&&a==f+1&&b<e)return $message="Must be a future Date",!0}function isChecked(a){return a.is(":checked")?!1:!0}function validate(a){a.children("fieldset").find(":input:not(button)").each(function(){var a=$(this),b=a.attr("class"),c=a.val(),d=a.attr("sel");switch(b){case"required":required(c)&&cssPaint(a);break;case"email":email(c)&&cssPaint(a);break;case"date":date(c)&&cssPaint(a);break;case"age":age(c)&&cssPaint(a);break;case"usPhone":usPhone(c)&&cssPaint(a);break;case"numeric":numeric(c)&&cssPaint(a);break;case"zip":zip(c)&&cssPaint(a);break;case"equalTo":equalTo(c,a)&&cssPaint(a);break;case"checkPassword":checkPassword(c,d)&&cssPaint(a);break;case"nospecial":nospecial(c)&&cssPaint(a);break;case"isChecked":isChecked(a.attr("checked"))&&(a.addClass("hasError"),$(".message").html("<p>Please comply with our privacy policy.</p>"))}$(this).children("button").addClass("disabled")})}function formatMoney(a,b){var c=parseFloat(a);isNaN(c)&&(c=0);var d="";0>c&&(d="-");c=Math.abs(c);c=parseInt(100*(c+.005));s=new String(c/100);0>s.indexOf(".")&&(s+=".00");s.indexOf(".")==s.length-2&&(s+="0");s=d+s;return b+addCommas(s)}function addCommas(a){var b=a.split(".",2),a=b[1],b=parseInt(b[0]);if(isNaN(b))return"";var c="";0>b&&(c="-");for(var b=Math.abs(b),d=new String(b),b=[];3<d.length;){var e=d.substr(d.length-3);b.unshift(e);d=d.substr(0,d.length-3)}0<d.length&&b.unshift(d);d=b.join(",");a=1>a.length?d:d+"."+a;return c+a}window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;this.console&&console.log(Array.prototype.slice.call(arguments))};(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;d=c.pop();)a[d]=a[d]||b})(window.console=window.console||{});(function(a){a.fn.modal=function(b){function e(){d.removeClass();d.addClass("error");d.addClass("modal");d.children(".text").after('<a class="reportError button">Report Error</a>');h()}function f(a){d.removeClass();d.addClass("message");d.addClass("modal");h();d.delay(3e3).fadeOut(200,function(){i()})}function g(){d.removeClass();d.addClass("html");d.addClass("modal");a.ajax({type:"POST",url:c.url,success:function(a){d.children(".text").html(a);h()},error:function(a,b,c){d.html('<ul class="errors"><li>Something went wrong with out System, please alert our admin with this id: AJ198473</li></ul>');h()}})}function h(){if($placement=="center"){var b=a(window).height()+a(window).scrollTop(),e=a(window).width();d.css("width",c.width);d.css("height",c.height);var f=a(window).height()+d.offset().top+d.height(),g=a(window).width();a("#mask").css({width:g,height:f});a("#mask").fadeIn(1e3);a("#mask").fadeTo("slow",.6);d.css({top:b/4,left:e/2-d.width()/2});d.children(".text").before('<a class="close"></a>');_left=d.offset().left;_objectW=d.outerWidth()-15;_totalLeft=_objectW+_left;_top=d.offset().top;_objectH=17.5;_totalTop=_top-_objectH;d.children("a.close").css({left:_totalLeft,top:_totalTop})}d.fadeIn(1e3)}function i(){a.ajax({url:"/ajax/admin/admin_functionality.php",type:"POST",data:{closeError:1},success:function(b){d.hide();d.html("");d.removeClass();a("#mask").remove()},error:function(b,c,d){a(".text").html("I was not able to close your error. Please report to system Admin.")}})}var c={style:"message",text:"",url:"",cancel:"",reportError:!0,reportURL:"",height:"",width:"60%"},b=a.extend(c,b),d=a(this);d.before('<div id="mask"><div>');$placement="center";if(c.style=="error"){d.html('<div class="text">'+c.text+"<div>");c.width="40%";e()}else if(c.style=="message"){d.html(c.text);$placement="top";f()}else if(c.style=="html"){d.html('<div class="text">'+c.text+"</div>");g()}a(".modal .close").live("click",function(){i();c.cancel.call(this)});a("#mask").live("click",function(){i();c.cancel})}})(jQuery);var $message="This field is required";$(".required").live("focus",function(){clearPaint($(this))});$(".required").live("focusout",function(){required($(this).val())&&cssPaint($(this))});$(".email").live("focus",function(){clearPaint($(this))});$(".email").live("focusout",function(){email($(this).val())&&cssPaint($(this))});$(".usPhone").live("focus",function(){clearPaint($(this))});$(".usPhone").live("focusout",function(){usPhone($(this).val())&&cssPaint($(this))});$(".date").live("focus",function(){clearPaint($(this))});$(".date").live("focusout",function(){date($(this).val())&&cssPaint($(this))});$(".age").live("focus",function(){clearPaint($(this))});$(".age").live("focusout",function(){age($(this).val())&&cssPaint($(this))});$(".adminAge").live("focus",function(){clearPaint($(this))});$(".adminAge").live("focusout",function(){adminAge($(this).val())&&cssPaint($(this))});$(".futureDate").live("focus",function(){clearPaint($(this))});$(".futureDate").live("focusout",function(){futureDate($(this).val())&&cssPaint($(this))});$(".numeric").live("focus",function(){clearPaint($(this))});$(".numeric").live("focusout",function(){numeric($(this).val())&&cssPaint($(this))});$(".zip").live("focus",function(){clearPaint($(this))});$(".zip").live("focusout",function(){zip($(this).val())&&cssPaint($(this))});$(".equalTo").live("focus",function(){clearPaint($(this))});$(".equalTo").live("focusout",function(){equalTo($(this).val(),$(this))&&cssPaint($(this))});$(".checkPassword").live("focus",function(){clearPaint($(this))});$(".checkPassword").live("focusout",function(){checkPassword($(this).val(),$(this).attr("sel"),$(this))});$(".nospecial").live("focus",function(){clearPaint($(this))});$(".nospecial").live("focusout",function(){nospecial($(this).val())&&cssPaint($(this))});$(".ac_input").live("focus",function(){clearPaint($(this))});$(".isChecked").live("click",function(){clearPaint($(this));$(".message").html("")});$(".disabled").live("click",function(a){a.preventDefault()});(function(a){a.fn.extend({autocomplete:function(b,d){var e="string"==typeof b,d=a.extend({},a.Autocompleter.defaults,{url:e?b:null,data:e?null:b,delay:e?a.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},d);d.highlight=d.highlight||function(a){return a};d.formatMatch=d.formatMatch||d.formatItem;return this.each(function(){new a.Autocompleter(this,d)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(b,d){function g(){var a=u.selected();if(!a)return!1;var b=a.result;p=b;if(d.multiple){var c=i(n.val());1<c.length&&(b=c.slice(0,c.length-1).join(d.multipleSeparator)+d.multipleSeparator+b);b+=d.multipleSeparator}n.val(b);k();n.trigger("result",[a.data,a.value]);return!0}function h(a,b){if(s==e)u.hide();else{var c=n.val();if(b||c!=p)p=c,c=j(c),c.length>=d.minChars?(n.addClass(d.loadingClass),d.matchCase||(c=c.toLowerCase()),m(c,l,k)):(n.removeClass(d.loadingClass),u.hide())}}function i(b){if(!b)return[""];var b=b.split(d.multipleSeparator),e=[];a.each(b,function(b,d){a.trim(d)&&(e[b]=a.trim(d))});return e}function j(a){if(!d.multiple)return a;a=i(a);return a[a.length-1]}function k(){var e=u.visible();u.hide();clearTimeout(o);n.removeClass(d.loadingClass);d.mustMatch&&n.search(function(a){a||(d.multiple?(a=i(n.val()).slice(0,-1),n.val(a.join(d.multipleSeparator)+(a.length?d.multipleSeparator:""))):n.val(""))});e&&a.Autocompleter.Selection(b,b.value.length,b.value.length)}function l(e,g){if(g&&g.length&&r){n.removeClass(d.loadingClass);u.display(g,e);var h=g[0].value;d.autoFill&&j(n.val()).toLowerCase()==e.toLowerCase()&&s!=f&&(n.val(n.val()+h.substring(j(p).length)),a.Autocompleter.Selection(b,p.length,p.length+h.length));u.show()}else k()}function m(e,f,g){d.matchCase||(e=e.toLowerCase());var h=q.load(e);if(h&&h.length)f(e,h);else if("string"==typeof d.url&&0<d.url.length){var i={timestamp:+(new Date)};a.each(d.extraParams,function(a,b){i[a]="function"==typeof b?b():b});a.ajax({mode:"abort",port:"autocomplete"+b.name,dataType:d.dataType,url:d.url,data:a.extend({q:j(e),limit:d.max},i),success:function(b){var g;if(!(g=d.parse&&d.parse(b))){g=[];for(var b=b.split("\n"),h=0;h<b.length;h++){var i=a.trim(b[h]);i&&(i=i.split("|"),g[g.length]={data:i,value:i[0],result:d.formatResult&&d.formatResult(i,i[0])||i[0]})}}q.add(e,g);f(e,g)}})}else u.emptyList(),g(e)}var e,f;e=46;f=8;var n=a(b).attr("autocomplete","off").addClass(d.inputClass),o,p="",q=a.Autocompleter.Cache(d),r=0,s,t={mouseDownOnSelect:!1},u=a.Autocompleter.Select(d,b,g,t),v;a.browser.opera&&a(b.form).bind("submit.autocomplete",function(){if(v)return v=!1});n.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(b){s=b.keyCode;switch(b.keyCode){case 38:b.preventDefault();u.visible()?u.prev():h(0,!0);break;case 40:b.preventDefault();u.visible()?u.next():h(0,!0);break;case 33:b.preventDefault();u.visible()?u.pageUp():h(0,!0);break;case 34:b.preventDefault();u.visible()?u.pageDown():h(0,!0);break;case d.multiple&&","==a.trim(d.multipleSeparator)&&188:case 9:case 13:if(g())return b.preventDefault(),v=!0,!1;break;case 27:u.hide();break;default:clearTimeout(o),o=setTimeout(h,d.delay)}}).focus(function(){r++}).blur(function(){r=0;t.mouseDownOnSelect||(clearTimeout(o),o=setTimeout(k,200))}).click(function(){1<r++&&!u.visible()&&h(0,!0)}).bind("search",function(){function b(a,b){var c;if(b&&b.length)for(var e=0;e<b.length;e++)if(b[e].result.toLowerCase()==a.toLowerCase()){c=b[e];break}"function"==typeof d?d(c):n.trigger("result",c&&[c.data,c.value])}var d=1<arguments.length?arguments[1]:null;a.each(i(n.val()),function(a,c){m(c,b,b)})}).bind("flushCache",function(){q.flush()}).bind("setOptions",function(b,e){a.extend(d,e);"data"in e&&q.populate()}).bind("unautocomplete",function(){u.unbind();n.unbind();a(b.form).unbind(".autocomplete")})};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(a){return a[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(a,b){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180};a.Autocompleter.Cache=function(b){function d(a,c){b.matchCase||(a=a.toLowerCase());var d=a.indexOf(c);"word"==b.matchContains&&(d=a.toLowerCase().search("\\b"+c.toLowerCase()));return-1==d?!1:0==d||b.matchContains}function e(a,c){i>b.cacheLength&&g();h[a]||i++;h[a]=c}function f(){if(!b.data)return!1;var d={},f=0;b.url||(b.cacheLength=1);d[""]=[];for(var g=0,h=b.data.length;g<h;g++){var i=b.data[g],i="string"==typeof i?[i]:i,j=b.formatMatch(i,g+1,b.data.length);if(!1!==j){var k=j.charAt(0).toLowerCase();d[k]||(d[k]=[]);i={value:j,data:i,result:b.formatResult&&b.formatResult(i)||j};d[k].push(i);f++<b.max&&d[""].push(i)}}a.each(d,function(a,c){b.cacheLength++;e(a,c)})}function g(){h={};i=0}var h={},i=0;setTimeout(f,25);return{flush:g,add:e,populate:f,load:function(e){if(!b.cacheLength||!i)return null;if(!b.url&&b.matchContains){var f=[],g;for(g in h)if(0<g.length){var j=h[g];a.each(j,function(a,b){d(b.value,e)&&f.push(b)})}return f}if(h[e])return h[e];if(b.matchSubset)for(g=e.length-1;g>=b.minChars;g--)if(j=h[e.substr(0,g)])return f=[],a.each(j,function(a,b){d(b.value,e)&&(f[f.length]=b)}),f;return null}}};a.Autocompleter.Select=function(b,d,e,f){function h(){o&&(p=a("<div/>").hide().addClass(b.resultsClass).css("position","absolute").appendTo(document.body),q=a("<ul/>").appendTo(p).mouseover(function(b){i(b).nodeName&&"LI"==i(b).nodeName.toUpperCase()&&(l=a("li",q).removeClass(g).index(i(b)),a(i(b)).addClass(g))}).click(function(b){a(i(b)).addClass(g);e();d.focus();return!1}).mousedown(function(){f.mouseDownOnSelect=!0}).mouseup(function(){f.mouseDownOnSelect=!1}),0<b.width&&p.css("width",b.width),o=!1)}function i(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return a?a:[]}function j(a){k.slice(l,l+1).removeClass(g);l+=a;0>l?l=k.size()-1:l>=k.size()&&(l=0);a=k.slice(l,l+1).addClass(g);if(b.scroll){var c=0;k.slice(0,l).each(function(){c+=this.offsetHeight});c+a[0].offsetHeight-q.scrollTop()>q[0].clientHeight?q.scrollTop(c+a[0].offsetHeight-q.innerHeight()):c<q.scrollTop()&&q.scrollTop(c)}}var g;g="ac_over";var k,l=-1,m,n="",o=!0,p,q;return{display:function(d,e){h();m=d;n=e;q.empty();for(var f=b.max&&b.max<m.length?b.max:m.length,i=0;i<f;i++)if(m[i]){var j=b.formatItem(m[i].data,i+1,f,m[i].value,n);!1!==j&&(j=a("<li/>").html(b.highlight(j,n)).addClass(0==i%2?"ac_even":"ac_odd").appendTo(q)[0],a.data(j,"ac_data",m[i]))}k=q.find("li");b.selectFirst&&(k.slice(0,1).addClass(g),l=0);a.fn.bgiframe&&q.bgiframe()},next:function(){j(1)},prev:function(){j(-1)},pageUp:function(){0!=l&&0>l-8?j(-l):j(-8)},pageDown:function(){l!=k.size()-1&&l+8>k.size()?j(k.size()-1-l):j(8)},hide:function(){p&&p.hide();k&&k.removeClass(g);l=-1},visible:function(){return p&&p.is(":visible")},current:function(){return this.visible()&&(k.filter("."+g)[0]||b.selectFirst&&k[0])},show:function(){var e=a(d).offset();p.css({width:"string"==typeof b.width||0<b.width?b.width:a(d).width(),top:e.top+d.offsetHeight,left:e.left}).show();if(b.scroll&&(q.scrollTop(0),q.css({maxHeight:b.scrollHeight,overflow:"auto"}),a.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var f=0;k.each(function(){f+=this.offsetHeight});e=f>b.scrollHeight;q.css("height",e?b.scrollHeight:f);e||k.width(q.width()-parseInt(k.css("padding-left"))-parseInt(k.css("padding-right")))}},selected:function(){var b=k&&k.filter("."+g).removeClass(g);return b&&b.length&&a.data(b[0],"ac_data")},emptyList:function(){q&&q.empty()},unbind:function(){p&&p.remove()}}};a.Autocompleter.Selection=function(a,b,c){if(a.createTextRange){var d=a.createTextRange();d.collapse(!0);d.moveStart("character",b);d.moveEnd("character",c);d.select()}else a.setSelectionRange?a.setSelectionRange(b,c):a.selectionStart&&(a.selectionStart=b,a.selectionEnd=c);a.focus()}})(jQuery);(function(a){function b(b,d){var f=b==window,j=d&&void 0!==d.message?d.message:void 0,d=a.extend({},a.blockUI.defaults,d||{});d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{});var o=a.extend({},a.blockUI.defaults.css,d.css||{}),u=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{}),j=void 0===j?d.message:j;f&&m&&c(window,{fadeOut:0});if(j&&"string"!=typeof j&&(j.parentNode||j.jquery)){var x=j.jquery?j[0]:j,y={};a(b).data("blockUI.history",y);y.el=x;y.parent=x.parentNode;y.display=x.style.display;y.position=x.style.position;y.parent&&y.parent.removeChild(x)}var y=d.baseZ,z=a.browser.msie||d.forceIframe?a('<iframe class="blockUI" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>'):a('<div class="blockUI" style="display:none"></div>'),x=a('<div class="blockUI blockOverlay" style="z-index:'+y++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),y=a(d.theme&&f?'<div class="blockUI '+d.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+y+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':d.theme?'<div class="blockUI '+d.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+y+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':f?'<div class="blockUI '+d.blockMsgClass+' blockPage" style="z-index:'+y+';display:none;position:fixed"></div>':'<div class="blockUI '+d.blockMsgClass+' blockElement" style="z-index:'+y+';display:none;position:absolute"></div>');j&&(d.theme?(y.css(u),y.addClass("ui-widget-content")):y.css(o));(!d.applyPlatformOpacityRules||!a.browser.mozilla||!/Linux/.test(navigator.platform))&&x.css(d.overlayCSS);x.css("position",f?"fixed":"absolute");(a.browser.msie||d.forceIframe)&&z.css("opacity",0);var o=[z,x,y],A=f?a("body"):a(b);a.each(o,function(){this.appendTo(A)});d.theme&&d.draggable&&a.fn.draggable&&y.draggable({handle:".ui-dialog-titlebar",cancel:"li"});o=k&&(!a.boxModel||0<a("object,embed",f?null:b).length);if(l||o){f&&d.allowBodyStretch&&a.boxModel&&a("html,body").css("height","100%");if((l||!a.boxModel)&&!f)var o=parseInt(a.css(b,"borderTopWidth"))||0,u=parseInt(a.css(b,"borderLeftWidth"))||0,B=o?"(0 - "+o+")":0,C=u?"(0 - "+u+")":0;a.each([z,x,y],function(a,b){var c=b[0].style;c.position="absolute";if(2>a)f?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),f?c.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),C&&c.setExpression("left",C),B&&c.setExpression("top",B);else if(d.centerY)f&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!d.centerY&&f){var e="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(d.css&&d.css.top?parseInt(d.css.top):0)+') + "px"';c.setExpression("top",e)}})}j&&(d.theme?y.find(".ui-widget-content").append(j):y.append(j),(j.jquery||j.nodeType)&&a(j).show());(a.browser.msie||d.forceIframe)&&d.showOverlay&&z.show();d.fadeIn?(o=d.onBlock?d.onBlock:i,z=d.showOverlay&&!j?o:i,o=j?o:i,d.showOverlay&&x._fadeIn(d.fadeIn,z),j&&y._fadeIn(d.fadeIn,o)):(d.showOverlay&&x.show(),j&&y.show(),d.onBlock)&&d.onBlock();e(1,b,d);f?(m=y[0],n=a(":input:enabled:visible",m),d.focusInput&&setTimeout(g,20)):h(y[0],d.centerX,d.centerY);d.timeout&&(j=setTimeout(function(){f?a.unblockUI(d):a(b).unblock(d)},d.timeout),a(b).data("blockUI.timeout",j))}function c(b,c){var f=b==window,g=a(b),h=g.data("blockUI.history"),i=g.data("blockUI.timeout");i&&(clearTimeout(i),g.removeData("blockUI.timeout"));c=a.extend({},a.blockUI.defaults,c||{});e(0,b,c);var j;j=f?a("body").children().filter(".blockUI").add("body > .blockUI"):a(".blockUI",b);f&&(m=n=null);c.fadeOut?(j.fadeOut(c.fadeOut),setTimeout(function(){d(j,h,c,b)},c.fadeOut)):d(j,h,c,b)}function d(b,c,d,e){b.each(function(){this.parentNode&&this.parentNode.removeChild(this)});c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.parent&&c.parent.appendChild(c.el),a(e).removeData("blockUI.history"));"function"==typeof d.onUnblock&&d.onUnblock(e,d)}function e(b,c,d){var e=c==window,c=a(c);if(b||!(e&&!m||!e&&!c.data("blockUI.isBlocked")))e||c.data("blockUI.isBlocked",b),d.bindEvents&&(!b||d.showOverlay)&&(b?a(document).bind("mousedown mouseup keydown keypress",d,f):a(document).unbind("mousedown mouseup keydown keypress",f))}function f(b){if(b.keyCode&&9==b.keyCode&&m&&b.data.constrainTabKey){var c=n,d=b.shiftKey&&b.target===c[0];if(!b.shiftKey&&b.target===c[c.length-1]||d)return setTimeout(function(){g(d)},10),!1}c=b.data;return 0<a(b.target).parents("div."+c.blockMsgClass).length?!0:0==a(b.target).parents().children().filter("div.blockUI").length}function g(a){n&&(a=n[!0===a?n.length-1:0])&&a.focus()}function h(b,c,d){var e=b.parentNode,f=b.style,g=(e.offsetWidth-b.offsetWidth)/2-(parseInt(a.css(e,"borderLeftWidth"))||0),b=(e.offsetHeight-b.offsetHeight)/2-(parseInt(a.css(e,"borderTopWidth"))||0);c&&(f.left=0<g?g+"px":"0");d&&(f.top=0<b?b+"px":"0")}if(/1\.(0|1|2)\.(0|1|2)/.test(a.fn.jquery)||/^1.1/.test(a.fn.jquery))alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+a.fn.jquery);else{a.fn._fadeIn=a.fn.fadeIn;var i=function(){},j=document.documentMode||0,k=a.browser.msie&&(8>a.browser.version&&!j||8>j),l=a.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!j;a.blockUI=function(a){b(window,a)};a.unblockUI=function(a){c(window,a)};a.growlUI=function(b,c,d,e){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>");c&&f.append("<h2>"+c+"</h2>");void 0==d&&(d=3e3);a.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:d,showOverlay:!1,onUnblock:e,css:a.blockUI.defaults.growlCSS})};a.fn.block=function(c){return this.unblock({fadeOut:0}).each(function(){"static"==a.css(this,"position")&&(this.style.position="relative");a.browser.msie&&(this.style.zoom=1);b(this,c)})};a.fn.unblock=function(a){return this.each(function(){c(this,a)})};a.blockUI.version=2.37;a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var m=null,n=[]}})(jQuery);$(function(){$.fn.loadGrid=function(a){return this.each(function(){function b(a){d.data().loadStart&&d.loadStart();d.data("gridLoading",!1);d.data("totalRows",a.nRows);d.data("firstRowShowing",a.start);d.data("lastRowShowing",a.end);d.data("rowData",{});a.colData&&$.each(a.colData,function(a,b){$.each(b,function(b,c){d.data().columnOpts[a]&&(d.data().columnOpts[a][b]=c)})});if(d.data().pager){var b=d.getHeaderRow().find("th[col="+a.order_by+"]").text();a.end>a.nRows&&(a.end=a.nRows);f.find(".gridTotal").html(""+a.start+" - "+a.end+" of <span class='nRows'>"+a.nRows+"</span> by "+b+" "+a.sort);$(".nRows").click(function(){$(this).parents(".gridContainer").find(".grid").loadGrid({nRowsShowing:$(this).html()})})}d.find("tr").remove();d.getHeaderRow().find("th[col='#'],th[col='X'],th[col='+']").remove();d.getHeaderRow().find("th");if(a.rows&&"[object Object]"==a.rows.toString()){var e=c.rowClick?c.rowClick:null;$.each(a.rows,function(a,b){a=a.substr(1);if(!d.getHeaderRow().find("[primary_key="+a+"]").length){var c=$("<tr primary_key='"+a+"'>");e&&c.click(e);$.each(d.data().columnOpts,function(e,f){var g=b[e];f.currency&&(g=formatMoney(g,f.currency));d.data().columnOpts[e].value=g;if(f.type&&"image"==f.type){var g="<img style='width:100%' src='"+g+"'/>",h=d.getHeaderRow().find("th[col="+e+"]");h.attr("width")||h.attr("width",100)}f.link&&(h="<a target='"+f.linkTarget+"' href='"+f.link+"'>"+g+"</a>",g=h=h.replace("{COL}",e).replace("{VALUE}",g).replace("{ROWID}",a));c.append("<td col='"+e+"'>"+g+"</td>")});d.append(c);$.each(b,function(a,b){d.data().rowData[a]||(d.data().rowData[a]=[]);d.data().rowData[a].push({value:b})})}})}else d.append("<tr><td colspan=100>No Rows</td></tr>");$.each(d.data().columnOpts,function(a,b){b.link&&d.getCol(a).getTdsFromTh().each(function(){var a=$(this).find("a"),b=a.attr("href"),c=$(this).parents("tr"),e=b.match(/\[([\w]+)\]/g);e&&$.each(e,function(e,f){var g=f.match(/\[([\w]+)\]/)[1],h=c.prevAll().length;b=b.replace("["+g+"]",d.data().rowData[g][h].value);a.attr("href",b)})})});d.getHeaderRow().find("th").each(function(a){if($(this).attr("width")){var b=parseInt($(this).attr("width"));d.find("tr:first td").eq(a).css("width",b)}});d.data().inlineEditing&&d.setupInlineEditing();try{$(".datepicker").datepicker({dateFormat:d.data().dateFormat})}catch(g){}0<d.data().totalRows?(d.data().showRowNumber&&d.createRowCount(),d.data().deleting&&d.createDeleteColumn()):d.parents(".gridContainer").find(".gridSave").fadeOut();d.hideHiddenCols();d.equalizeColumns();$.blockUI&&d.unblock();d.data().loadComplete&&d.loadComplete()}var c=$.extend({order_by:"",sort:"ASC",page:1,search:"",justSearched:!1,nRowsShowing:10,resizable:!1,resizableColumns:!0,pager:!0,pagerLocation:"bottom",saveLocation:"pager",refreshButton:!1,dateRange:!1,dateRangeFrom:"",dateRangeTo:"",stickyRows:!0,clickToSort:!0,inlineEditing:!1,showRowNumber:!1,loadingMessage:"loading",maxLength:!1,width:"100%",height:"auto",maxHeight:500,fullScreen:!1,adding:!1,addButton:!1,linkTarget:"_blank",confirmBeforeSort:!0,deleting:!0,deleteConfirm:!0,dateFormat:"yy-mm-dd",pageSearchResults:!1,columnOpts:null,rowClick:null,rowAdd:null,cellAdd:null,beforeLoadStart:null,loadStart:null,loadComplete:null,saveSuccess:null,saveFail:null,deleteSuccess:"Content Deleted",deleteFail:"Delete Failed",title:!1,searchBar:!0},a),d=$(this);d.parents(".gridWrapper").length||d.wrap("<div class='gridContainer'>").wrap("<div class='gridWrapper'>");d.data().page?$.extend(d.data(),a):$.each(c,function(a,b){"function"!=typeof b?d.data(a,b):($.fn[a]=b,d.data(a,!0))});d.parents(".gridContainer").width(d.data().width);d.parents(".gridContainer").height(d.data().height);d.parents(".gridWrapper").css("max-height",d.data().maxHeight);$.blockUI&&d.block({message:d.data().loadingMessage});var e=d.moveHeaderRow();d.data().objectized||(e.find("th").each(function(){var a=$(this);1<a[0].attributes.length&&$.each($(a[0].attributes),function(b){var c=a[0].attributes[b].name,b=a[0].attributes[b].value;d.data().columnOpts||d.data("columnOpts",{});d.data().columnOpts[a.attr("col")]||(d.data().columnOpts[a.attr("col")]={});d.data().columnOpts[a.attr("col")][c]=b})}),d.data("objectized",!0));if(d.data().pager)var f=d.createPager();d.attr("title")&&!d.parents(".gridContainer").find(".gridTitle").length&&(d.parents(".gridContainer").prepend("<div class='gridTitle'>"+d.attr("title")+"</div>"),d.data().adding?(d.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridAdd'><div>Add</div></div>"),d.parents(".gridContainer").find(".gridAdd").click(function(){var a=[];$.each(d.data().columnOpts,function(b,c){c.editable&&a.push(b)});$.post(d.attr("action"),{add:!0,cols:a},function(a){d.loadGrid({order_by:a,sort:"DESC"})})})):d.data().addButton&&d.parents(".gridContainer").find(".gridTitle").append("<a href='"+d.data().addButton+"' class='gridButton gridAdd'><div>Add</div></a>"));if(d.data().fullScreen){d.parents(".gridContainer").width("100%");d.parents(".gridContainer").find(".gridHeaderRow").width("100%");d.parents(".gridWrapper").css("max-height","none");var e=parseInt(d.find("tr:last").css("height")),g=parseInt(d.parents(".gridContainer").find(".gridHeaderRow th:first").css("padding-top"));d.css("margin-bottom",e+g);f.addClass("fixed");$(window).resize(function(){d.equalizeColumns()})}d.data().resizable&&d.makeResizable();d.data("cols",d.getHeaderRow().find("th[col!='X'][col!='#'][col!='+']").attrJoin("col"));d.data().beforeLoadStart&&d.beforeLoadStart();d.data("gridLoading",!0);$.ajax({url:d.attr("action"),type:"POST",data:{data:d.data(),table:d.attr("sel"),load:!0},dataType:"json",success:function(a,c,d){$(".data").html(a);$(".data").html(a.colData);b(a,c,d)}})})};$(".gridSearch input[type=text]").live("keyup",function(){var a=$(this).parents(".gridContainer").find(".grid");0==a.data().justSearched?(a.loadGrid({search:$(this).val(),page:1}),a=$(this).parents(".gridContainer").find(".grid"),a.parents(".gridContainer").find(".gridSearch input").val(search)):a.data("justSearched",!1)}).live("keydown",function(a){var b=$(this).parents(".gridContainer").find(".grid");"13"==a.keyCode&&(2<$(this).val().length||0==$(this).val().length)&&(b.data("justSearched",!0),b.loadGrid({search:$(this).val(),page:1}))});$(".nRowsShowing").live("keydown",function(a){13==a.keyCode&&0<parseInt($(this).val())&&($(this).parents(".gridContainer").find(".grid").loadGrid({nRowsShowing:$(this).val()}),a.preventDefault())}).live("keyup",function(){$(this).parents(".gridContainer").find(".grid").parents(".gridContainer").find(".nRowsShowing").val($(this).val())});$(".gridHeaderRow th").live("click",function(a){var b=$(this).parents(".gridContainer").find(".grid"),c=!0;b.find("tr.toBeSaved").length&&b.data().confirmBeforeSort&&(c=confirm("You have unsaved changes on the grid, if you continue those changes will be lost. Continue?"));!$(a.target).hasClass("colHandle")&&c&&b.data().clickToSort&&(a="DESC"==b.data().sort?"ASC":"DESC",b.loadGrid({sort:a,order_by:$(this).attr("col")}))});$(".gridHeaderRow th").live("mousedown",function(a){if(3!=a.which)return!1});$(".gridHeaderRow th").live("contextmenu",function(a){var b=$(this),c=$(this).parents(".gridContainer").find(".grid");0<$(".gridContext").length&&$(".gridContext").remove();var d="checkbox"==c.data().columnOpts[$(this).attr("col")].editable?"block":"none",e=!1,f=null,g=null,h=null,i=null,j=null;$(this).getTdsFromTh().each(function(a){var b=$(this).find("input").length?$(this).find("input").val():$(this).text();-1==b.search(/^[\d.\$\u00db\u00a3\u00b4\u00a3]*$/)&&(e=!0);b=parseFloat(b.replace(/[\$\u00db\u00a3\u00b4]/,""));f+=b;i||(i=b);h=b>h?b:h;i=b<i?b:i;j=a});var f=Math.round(100*f)/100,g=Math.round(100*(h/j))/100,k=e?"none":"block";c.data().columnOpts[b.attr("col")].currency&&(b=c.data().columnOpts[b.attr("col")].currency,f=formatMoney(f,b),i=formatMoney(i,b),h=formatMoney(h,b),g=formatMoney(g,b));a=$("<div class='gridContext'><div class='closeContext'>x</div><div class='makeFluid'>Make Fluid</div><div class='colHide'>Remove</div><div class='colHighlite'>Highlite</div><div class='colDeHighlight'>Un-Highlite</div><hr style='display:"+k+"'><div style='display:"+
k+"'>Sum: <span class='showSum'>"+f+"</span></div><div style='display:"+k+"'>Avg: <span class='showAvg'>"+g+"</span></div><div style='display:"+k+"'>Max: <span class='showMax'>"+h+"</span></div><div style='display:"+k+"'>Min: <span class='showMin'>"+i+"</span></div><hr style='display:"+d+"'><div style='display:"+d+"' class='checkAll'>Check All</div><div style='display:"+d+"' class='uncheckAll'>UnCheck All</div></div>").css({left:a.clientX+200>$(window).width()?a.clientX-200:a.clientX,top:a.clientY});a.attr("index",$(this).prevAll().length);$(this).parents(".gridContainer").append(a);c=$(this).parents(".gridContainer").find(".grid");$(".closeContext").click(function(){c.equalizeColumns()});return!1});$(".checkAll").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid");b.getHeaderRow().find("th").eq(a).getTdsFromTh().each(function(){$(this).find(":checkbox").attr("checked",!0);$(this).parents("tr").addClass("toBeSaved")});b.equalizeColumns()});$(".uncheckAll").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid");b.getHeaderRow().find("th").eq(a).getTdsFromTh().each(function(){$(this).find(":checkbox").attr("checked",!1);$(this).parents("tr").addClass("toBeSaved")});b.equalizeColumns()});$(".makeFluid").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid"),c=b.getHeaderRow().find("th").eq(a),a=b.find("tr:first td").eq(a);c.removeAttr("width");a.width("auto");b.equalizeColumns()});$(".colHide").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid"),a=b.getHeaderRow().find("th").eq(a);a.getTdsFromTh().each(function(){$(this).remove()});a.remove();b.equalizeColumns()});$(".colHighlite").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid");b.getHeaderRow().find("th").eq(a).getTdsFromTh().each(function(){$(this).addClass("hilite")});b.equalizeColumns()});$(".colDeHighlight").live("click",function(){var a=$(this).parent().attr("index"),b=$(this).parents(".gridContainer").find(".grid");b.getHeaderRow().find("th").eq(a).getTdsFromTh().each(function(){$(this).removeClass("hilite")});b.equalizeColumns()});$(".gridTitle").live("click",function(){0<$(".gridContext").length&&$(".gridContext").remove()});$(".grid tr").live("dblclick",function(){var a=$(this).parents(".grid");a.data().stickyRows&&($(this).addClass("stuckRow"),a.getHeaderRow().append($(this)),a.equalizeColumns())});$(".gridHeaderRow tr").live("dblclick",function(){var a=$(this).parents(".gridContainer").find(".grid");$(this).prevAll().length&&($(this).remove(),a.loadGrid())});$(".gridNext").live("click",function(){var a=$(this).parents(".gridContainer").find(".grid");if(!a.data().gridLoading){var b=parseInt(a.data().lastRowShowing);parseInt(a.data().nRowsShowing);var c=parseInt(a.data().totalRows);b<c&&a.loadGrid({page:parseInt(a.data().page)+1})}});$(".gridBack").live("click",function(){var a=$(this).parents(".gridContainer").find(".grid");!a.data().gridLoading&&1<a.data().page&&a.loadGrid({page:parseInt(a.data().page)-1})});$(".gridRefresh").live("click",function(){$(this).parents(".gridContainer").find(".grid").loadGrid()});$(".gridWrapper").live("mousedown",function(){if(!$(this).find(".grid").data().inlineEditing)return!1});$(".gridButton, .gridHandle").live("mousedown",function(){return!1});$(window).resize(function(){});$.fn.exportAsJson=function(){return $(this).data().rowData};$.fn.hideHiddenCols=function(){var a=$(this);$.each(a.data().columnOpts,function(b,c){c.display&&"hidden"==c.display&&a.hideCol(c.col)})};$.fn.hideCol=function(a){a=$(this).getHeaderRow().find("th[col="+a+"]");a.hide();a.getTdsFromTh().hide()};$.fn.setupInlineEditing=function(){var a=$(this);a.data().pager||a.data("saveLocation","title");a.parents(".gridContainer").find(".gridSave").remove();switch(a.data().saveLocation){case"title":a.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridSave'><div>Save</div></div>");break;case"both":a.getPager().append("<div class='gridButton gridSave'><div>Save</div></div>");a.parents(".gridContainer").find(".gridTitle").append("<div class='gridButton gridSave'><div>Save</div></div>");break;default:a.getPager().append("<div class='gridButton gridSave'><div>Save</div></div>")}var b=a.parents(".gridContainer").find(".gridSave");"none"==b.css("display")&&b.fadeIn().click(function(){var d=[];a.find("tr.toBeSaved").each(function(){var a=[];$(this).find(".editableInput").each(function(){var b=$(this).parent().attr("col"),c="checkbox"==$(this)[0].type?$(this)[0].checked?1:0:$(this).val(),c=c.toString().replace(/"/g,'\\"'),c=c.toString().replace(/\r|\n/g,"\\n");a.push('"'+b+'":"'+c+'"')});var b=$(this).attr("primary_key"),c="{"+a.join(",")+"}";d.push('"'+b+'":'+c)});var e="{"+d.join(",")+"}";"{}"!=e&&(console.log(e),$.blockUI&&a.block({message:a.data().loadingMessage}),$.post(a.attr("action"),{save:1,json:e},function(d){d?(b.text("ERROR! refresh"),alert(d),a.data().saveFail&&a.saveFail()):(b.html("Saved!").fadeOut("fast",function(){b.fadeIn("fast",function(){b.html("Save");a.data().saveSuccess&&a.saveSuccess()})}),a.loadGrid())}))});a.getHeaderRow().find("th").each(function(){var b=$(this),c=b.attr("col");if(a.data().columnOpts[c]&&a.data().columnOpts[c].editable){var d=a.data().columnOpts[c].editable;"text"==d||"inline"==d||"date"==d||"textarea"==d?b.getTdsFromTh().each(function(){var b=$(this);if(!b.hasClass("editableCell")){b.addClass("editableCell");var f=f?0:b.width(),g="";a.data().columnOpts[c].maxLength&&(g="maxlength='"+a.data().columnOpts[c].maxLength+"'");"null"==b.text()&&b.text("");var h="date"==d?"datepicker":"",g="textarea"==d?$("<textarea "+g+' class="editableInput '+h+'"></textarea>'):$("<input "+g+' class="editableInput '+h+'" type="text" />');g.val(b.text());g.focus(function(){$(this).parents("tr").addClass("toBeSaved")});b.html(g);b.width(f)}}):"passthru"==d?b.getTdsFromTh().each(function(){var a=$(this);if(!a.hasClass("editableCell")){a.addClass("editableCell");"null"==a.text()&&a.text("");var b=$("<input type='hidden' class='editableInput' value='"+a.text()+"'/>");b.focus(function(){$(this).parents("tr").addClass("toBeSaved")});a.append(b)}}):"select"==d?$.post(a.attr("action"),{select:1,col:c},function(d){b.getTdsFromTh().each(function(){var b=$(this),e=$("<select class='editableInput'></select>");(nullText=a.data().columnOpts[c].nulltext)&&e.append("<option value=''>"+nullText+"</option>");$.each(d,function(a,c){b.text()==a?e.append("<option selected value='"+a+"'>"+c+"</option>"):e.append("<option value='"+a+"'>"+c+"</option>")});e.focus(function(){$(this).parents("tr").addClass("toBeSaved")});$(this).addClass("editableCell").html(e)});a.equalizeColumns()},"json"):"checkbox"==d&&b.getTdsFromTh().each(function(){$(this).addClass("editableCell");var a=parseInt($(this).text()),a=a?$("<input class='editableInput' type='checkbox' checked value='"+a+"'/>"):$("<input class='editableInput' type='checkbox' value='"+a+"'/>");a.click(function(){$(this).parents("tr").addClass("toBeSaved")});$(this).html(a)})}})};$.fn.createRowCount=function(){var a=$(this);a.getHeaderRow().find("tr:first").prepend("<th style='width:20px' col='#'><div class='colResizer' style='width:20px'>#<div class='colHandle'></div></div></th>");a.find("tr").each(function(b){b+=parseInt(a.data().firstRowShowing);$(this).prepend("<td col='#'>"+b+"</td>")});a.equalizeColumns()};$.fn.createDeleteColumn=function(){var a=$(this);a.getHeaderRow().find("tr:first").append("<th col='X' style='width:20px'><div class='colResizer' style='width:20px'>Delete<div class='colHandle'></div></div></th>");a.find("tr").each(function(){var b=$(this);$del=$("<div class='deleteGrid ninjaSymbol ninjaSymbolClear'></div>");$del.click(function(){if(a.data().deleteConfirm){var d=b.prevAll().length,d=a.data().rowData[a.data().deleteConfirm]?a.data().rowData[a.data().deleteConfirm][d].value:"";confirm("Are you sure you want to delete "+d+" ?")&&$.post(a.attr("action"),{"delete":!0,primary_key:$(this).parents("tr").attr("primary_key"),table:$(this).parents("tr").parent("tbody").parent("table").attr("sel")},function(b){b?(a.loadGrid(),a.data().deleteSuccess&&a.deleteSuccess()):(a.data().deleteFail&&a.deleteFail(),alert("Error: Delete Failed"))})}else $.post(a.attr("action"),{"delete":!0,primary_key:$(this).parents("tr").attr("primary_key")},function(){a.loadGrid()})});$(this).append($("<td col='X' style='width:20px'></td>").append($del))});a.equalizeColumns()};$.fn.getCol=function(a){return $(this).getHeaderRow().find("th[col="+a+"]")};$.fn.getTdsFromTh=function(){return $(this).parents(".gridContainer").find(".grid").find("td[col="+$(this).attr("col")+"]")};$.fn.equalizeColumns=function(){var a=$(this);return this.each(function(){0<$(".gridContext").length&&$(".gridContext").remove();var b=a.getHeaderRow();if(a.height()>a.parents(".gridWrapper").height()){b.find(".scrollTh").remove();var c=$("<th></th>").addClass("scrollTh").css({padding:0,margin:0,width:15});b.find("tr:first").append(c)}else a.parents(".gridWrapper").height()>a.height()&&$(".scrollTh").remove();a.find("tr:first td:visible").each(function(a){a=b.find(".colResizer").eq(a);parseInt(a.parents("th").css("padding-left"));parseInt(a.parents("th").css("padding-left"));a.width($(this).width())})})};$.fn.moveHeaderRow=function(){var a=$(this);a.getHeaderRow().length||($firstTr=a.find("tr:first").clone(),a.parents(".gridContainer").prepend($("<table class='gridHeaderRow'>").append($firstTr)),$firstTr.find("th").each(function(){var b=$(this),c=b.text();b.html("");a.getHeaderRow().find("th");var d=$("<div class='colHandle'></div>");d.height(b.outerHeight());c=$("<div class='colResizer'></div>").html(c).append(d);a.data().resizableColumns&&d.mousedown(function(c){var d=c.clientX;$(document).bind("mousemove.grid",function(c){var e=b.find("div.colResizer"),f=e.width()+(c.clientX-d),g=b.prevAll().length;e.width(f);a.find("tr:first td").eq(g).width(f);d=c.clientX;a.equalizeColumns();b.attr("width",f)});$(document).mouseup(function(){$(document).unbind("mousemove.grid")})});b.width("auto");b.append(c);c=-1*parseInt(b.css("padding-top"));d.css({top:c,right:-1*d.outerWidth()/1.9})}),a.getHeaderRow().find(".colhandle:last").remove());return a.getHeaderRow()};$.fn.createPager=function(){var a=$(this),b=a.getPager();if(!b.length){b="";a.data().dateRange&&(b="<div class='dateRange'><input type='text' class='dateRangeFrom datepicker' value='"+a.data().dateRangeFrom+"'/> -<input type='text' class='dateRangeTo datepicker' value='"+a.data().dateRangeTo+"'/></div><div class='gridButton dateGo'><div>Go</div></div>");var c="";a.data().refreshButton&&(c="<div class='gridButton gridRefresh'><div>Refresh</div></div>");b=$("<div class='gridPager'>"+c+"<div class='gridSearch'><input type='text' placeholder='search' value=''/></div><div class='gridLimit'><input type='text' value='"+a.data().nRowsShowing+"' style='width:20px' class='nRowsShowing'/></div><div class='gridButton gridBack'><div>Back</div></div><div class='gridButton gridNext'><div>Next</div></div><div class='gridTotal'></div>"+b+"<div class='gridButton gridSave'><div>Save</div></div></div>");switch(a.data().pagerLocation){case"bottom":a.parents(".gridContainer").append(b);break;case"top":a.parents(".gridContainer").prepend(b);break;case"both":a.parents(".gridContainer").prepend(b.clone()),a.parents(".gridContainer").append(b)}a.data().dateRange&&($(".dateGo").click(function(){a.loadGrid({dateRangeFrom:$(this).parents(".gridContainer").find(".dateRangeFrom").val(),dateRangeTo:$(this).parents(".gridContainer").find(".dateRangeTo").val()})}),$(".dateRangeFrom").change(function(){$(this).parents(".gridContainer").find(".dateRangeFrom").val($(this).val())}),$(".dateRangeTo").change(function(){$(this).parents(".gridContainer").find(".dateRangeTo").val($(this).val())}))}return a.getPager()};$.fn.getHeaderRow=function(){return $(this).parent().prev(".gridHeaderRow")};$.fn.getPager=function(){return $(this).parents(".gridContainer").find(".gridPager")};$.fn.makeResizable=function(){var a=$(this),b=a.parents(".gridContainer"),c=a.parents(".gridWrapper"),d=$("<div class='gridHandle'></div>");d.mousedown(function(d){var e=d.clientX,f=d.clientY;$(document).bind("mousemove.resize",function(d){b.width(b.width()+(d.clientX-e));c.height(c.height()+(d.clientY-f));c.css("max-height",c.css("max-height")+(d.clientY-f));e=d.clientX;f=d.clientY;a.equalizeColumns()});$(document).mouseup(function(){$(document).unbind("mousemove.resize")})});a.parents(".gridContainer").append(d)};$.fn.attrJoin=function(a){return $(this).map(function(){return $(this).attr(a)}).get().join(",")}});